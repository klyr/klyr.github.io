<!doctype html>
<html>
<head>
    <base href="/">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="author" content="Julien Barbot">

<meta name="description" content="">

<title>Posts</title>
<meta name="generator" content="Hugo 0.59.1" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/pojoaque.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
<link  href="https://klyr.github.io/css/theme.min.css" rel="stylesheet" type="text/css">

</head>
<body>
<div class="page-container container-fluid">
<div class="col-md-3 menu">
    <nav class="col-md-3">
    
    <h3 class="home-link"><a href="https://klyr.github.io">Root</a></h3>
    <div id="last-posts" class="open">
        <h3 data-open="last-posts">~klyr - Most recent posts</h3>
        <ul>
            
            <li><a href="https://klyr.github.io/posts/openssh/">OpenSSH related stuff</a></li>
            
            <li><a href="https://klyr.github.io/posts/playing_with_p4/">Playing with the P4 language</a></li>
            
            <li><a href="https://klyr.github.io/posts/playing_with_ubpf/">Playing with uBPF</a></li>
            
            <li><a href="https://klyr.github.io/posts/samsung_a3_lineage/">Installing Lineage OS to a Samsung Galaxy A3</a></li>
            
            <li><a href="https://klyr.github.io/posts/ebpf/">Playing with eBPF (extended BPF)</a></li>
            
            <li><a href="https://klyr.github.io/posts/playing_with_linc_switch/">Playing with the Erlang Linc Switch</a></li>
            
            <li><a href="https://klyr.github.io/posts/linking_rust_lib_with_c/">Linking Rust Library with C</a></li>
            
            <li><a href="https://klyr.github.io/posts/playing_with_linux_framebuffer/">Playing with linux framebuffer</a></li>
            
            <li><a href="https://klyr.github.io/posts/updating_ip_routes_in_c/">Updating IP routes programmatically</a></li>
            
            <li><a href="https://klyr.github.io/posts/gnu_backtrace_extension/">Display backtrace when a program segfaults</a></li>
            
            <li><a href="https://klyr.github.io/posts/trickle/">Trickle, lightweight userspace bandwidth shaper</a></li>
            
            <li><a href="https://klyr.github.io/posts/playing_with_systemtap/">Playing with systemtap</a></li>
            
            <li><a href="https://klyr.github.io/posts/pipe_viewer/">Pipe Viewer</a></li>
            
            <li><a href="https://klyr.github.io/posts/ip_route_based_on_port/">Ip routing based on destination port</a></li>
            
            <li><a href="https://klyr.github.io/posts/c_pointers_ksplice_challenge/">C pointers &amp; Ksplice challenge</a></li>
            
            <li><a href="https://klyr.github.io/posts/commands_and_keys_reminders/">Commands &amp; key bindings reminders</a></li>
            
            <li><a href="https://klyr.github.io/posts/standalone_python_project/">Standalone Python project/installation</a></li>
            
            <li><a href="https://klyr.github.io/posts/using_a_free_cdn/">Using a free CDN, Cloudflare</a></li>
            
            <li><a href="https://klyr.github.io/posts/manipulating_data_with_r/">Manipulating data with R</a></li>
            
            <li><a href="https://klyr.github.io/posts/various_reminders_about_openssl_and_certificates/">Various reminders about OpenSSL and Certificates</a></li>
            
            <li><a href="https://klyr.github.io/posts/colored_less_output/">Colored less output</a></li>
            
            <li><a href="https://klyr.github.io/posts/preserving_buffer_cache/">Preserving Buffer Cache State</a></li>
            
        </ul>
    </div>
    

</nav>

</div>
<div class="col-md-9 content">


<div class="articles-list">
    
    <article>
        <h3><a href="https://klyr.github.io/posts/preserving_buffer_cache/">Preserving Buffer Cache State</a> - 2011-07-25 00:00:00</h3>
        When archiving big files (for example a big database) rsync feeds uselessly the disk cache. Thanks to the posix_fadvise linux system call we can tell the operating system that keeping archived data in cache is useless, leaving the disk cache for other applications (ie: the database).
Tobi Oetiker explains this on his blog and made a patch for rsync. The patch does not work out of the box and needed little modifications.
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/colored_less_output/">Colored less output</a> - 2011-07-26 00:00:00</h3>
        To colorize the output of less, use the GNU Source-highlight tool.
Install Debian package:
$ sudo apt-get install source-highlight Add this to your shell configuration file:
export LESSOPEN=&#34;| /usr/share/source-highlight/src-hilite-lesspipe.sh %s&#34; export LESS=&#39; -R &#39;
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/various_reminders_about_openssl_and_certificates/">Various reminders about OpenSSL and Certificates</a> - 2011-07-29 00:00:00</h3>
        Create a self-signed Certificate authority Create an RSA key Use the genrsa command to create the server private key with the following properties:
 The key is protected with the symetric AES256 algorithm. (protecting the key is not mandatory) The key is 2048 bits long.  Here is the command:
$ openssl genrsa -aes256 -out private/server.key 2048 Generating RSA private key, 2048 bit long modulus ...............................................................................................+++ ..+++ unable to write &#39;random state&#39; e is 65537 (0x10001) Enter pass phrase for test.
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/manipulating_data_with_r/">Manipulating data with R</a> - 2011-08-02 00:00:00</h3>
        Newbie guide to R
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/using_a_free_cdn/">Using a free CDN, Cloudflare</a> - 2011-08-08 00:00:00</h3>
        CDN: Content delivery network A CDN act as a cache for static ressources of your web server. One famous CDN is Akamai but is quite expensive.
CDN architecture is quite complex with a set of multiple proxies located in multiple datacenters around the world. The goal is to reduce the distance to the minimum between the served ressource and the user asking for the ressource.
A CDN not only saves the bandwith and load of your server but also global Internet peers involved between the client and the server.
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/standalone_python_project/">Standalone Python project/installation</a> - 2011-08-16 00:00:00</h3>
        Let&rsquo;s take an example of installing Django without using Debian apt command. We will use virtualenv to make a self-contained python directory.
First create your installation directory:
$ mkdir -p project/django $ cd project/django Get the virtualenv tool:
$ wget --no-check-certificate &#39;https://raw.github.com/pypa/virtualenv/develop/virtualenv.py&#39; Create the virtual environment:
$ python virtualenv.py --no-site-packages --distribute python_django_env Note interesting parameters::
--no-site-packages Don&#39;t give access to the global site-packages dir to the virtual environment --distribute Use Distribute instead of Setuptools.
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/commands_and_keys_reminders/">Commands &amp; key bindings reminders</a> - 2011-09-28 00:00:00</h3>
        Usefull command reminders
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/c_pointers_ksplice_challenge/">C pointers &amp; Ksplice challenge</a> - 2011-10-19 00:00:00</h3>
         C pointers &amp; Ksplice challenge The Ksplice Pointer Challenge.
#include &lt;stdio.h&gt; int main() { int x[5]; printf(&#34;%p\n&#34;, x); printf(&#34;%p\n&#34;, x+1); printf(&#34;%p\n&#34;, &amp;x); printf(&#34;%p\n&#34;, &amp;x+1); return 0; } On a 64bits architecture:
0x7fffe4a594d0 0x7fffe4a594d4 0x7fffe4a594d0 0x7fffe4a594e4
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/ip_route_based_on_port/">Ip routing based on destination port</a> - 2012-04-18 00:00:00</h3>
        Route packets based on destination port
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/pipe_viewer/">Pipe Viewer</a> - 2012-05-25 00:00:00</h3>
         Pipe Viewer To visualize data throughput through a pipe use Pipe Viewer tool.
$ sudo apt-get install pv For example just replace every pipe with | pv |:
$ cat bigfile.txt | gzip -9 &gt; /tmp/test.gz $ ```shell $ cat bigfile.txt | pv | gzip -9 &gt; /tmp/test.gz 14MB 0:00:00 [22.6MB/s] [ &lt;=&gt; ] $
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/playing_with_systemtap/">Playing with systemtap</a> - 2012-07-06 00:00:00</h3>
        Playing with systemtap
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/trickle/">Trickle, lightweight userspace bandwidth shaper</a> - 2012-07-10 00:00:00</h3>
        What &ldquo;Trickle is a portable lightweight userspace bandwidth shaper. It can run in collaborative mode (together with trickled) or in stand alone mode.&rdquo;
Before, no limitation:
$ wget &#39;http://wwww.example.org/somefile&#39; --2012-07-10 14:46:13-- http://wwww.example.org/somefile [ ... ] 2012-07-10 14:46:13 (866 KB/s) - `somefile&#39; saved [12485] After, limited to 40 kbit/s:
$ trickle -v -s -d 40 wget &#39;http://www.example.org/somefile&#39; --2012-07-10 14:50:27-- http://wwww.example.org/somefile [ ... ] wget: [trickle] avg: 20.8 KB/s; win: 20.8 KB/s wget: [trickle] avg: 40.
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/gnu_backtrace_extension/">Display backtrace when a program segfaults</a> - 2012-12-03 00:00:00</h3>
        When an application crashes, with a segfault for example it can be usefull have debugging help like a stacktrace of function calls
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/updating_ip_routes_in_c/">Updating IP routes programmatically</a> - 2012-12-10 00:00:00</h3>
        ioctl(2) is a special system call used when no other system call can handle a specific I/O operation. For exemple, the generic write(2) syscall is used for writing to a specified file descriptor but there is neither syscall to open the CD-tray nor syscall to manage routing tables: ioctl is here as a fit-all syscall.
From the man page:
NAME ioctl - control device SYNOPSIS #include &lt;sys/ioctl.h&gt; int ioctl(int d, int request, void *args); DESCRIPTION The ioctl() function manipulates the underlying device parameters of special files.
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/playing_with_linux_framebuffer/">Playing with linux framebuffer</a> - 2012-12-19 00:00:00</h3>
        Playing with the framebuffer on Linux
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/linking_rust_lib_with_c/">Linking Rust Library with C</a> - 2014-12-17 00:00:00</h3>
        Introduction Rust is a system programming Language developed by Mozilla. For a C-like language, it features interesting paradigms:
 functional style, actors, object oriented, safe memory allocation and free  In this article we will link a Rust library with a C program.
Tools used:
 rustc 0.13.0-nightly (5484d6f6d 2014-12-02) gcc (Debian 4.9.1-19) 4.9.1 docker  Installation Compiling the Rust compiler takes quite some time, so I decided to use a nightly built container of the compiler:
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/playing_with_linc_switch/">Playing with the Erlang Linc Switch</a> - 2014-12-19 00:00:00</h3>
        Introduction Linc is a software switch in Erlang, which support Openflow 1.4.
Here we will try to install it and make it run in a simple scenario. Later we will try to use it with an openflow compatible Controller (maybe Opendaylight or FlowER).
Installation $ git clone https://github.com/FlowForwarding/LINC-Switch.git $ sudo apt-get install libpcap0.8-dev $ cd LINC-Switch $ cp rel/files/sys.config.orig rel/files/sys.config $ make Note that at some point during installation, root privileges are required to use the setcap utility.
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/ebpf/">Playing with eBPF (extended BPF)</a> - 2018-04-25 00:00:00</h3>
        Let&rsquo;s play with eBPF in order to find what is slowing down my computer
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/samsung_a3_lineage/">Installing Lineage OS to a Samsung Galaxy A3</a> - 2020-02-18 00:00:00</h3>
        Introduction Heimdal Build Heimdal git clone https://gitlab.com/BenjaminDobell/Heimdall.git sudo dnf install libusb-devel.x86_64 cd Heimdall mkdir build; cd build cmake -DCMAKE_BUILD_TYPE=Release -DDISABLE_FRONTEND .. make Check installation Put your device in download mode, on the A3 it&rsquo;s:
 1 Switch OFF device 2 Volume Down + Home button + Power button. 3 Choose Download mode: Volume Up  $ sudo ./heimdal detect Download PIT file $ sudo ./heimdall download-pit --output &#39;a3-2020-02-20.pit&#39; --verbose Heimdall v1.
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/openssh/">OpenSSH related stuff</a> - 2020-04-02 00:00:00</h3>
        Create a ed25519 SSH key  ECC: Elliptic Curve Cryptography is a family of algorithms (ECDSA, ed25519) Curve25519: name of the elliptic curve Ed25519: Name of the signature algorithm  $ ssh-keygen -a 100 -t ed25519 -b 521 -f ~/.ssh/id_ed25519.barbot.org -C &#34;julien@barbot.org&#34; You can look at explainshell.com to understand each parameters.
Use this key for specific hosts:
$ cat .ssh/config Host github.com IdentityFile ~/.
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/playing_with_p4/">Playing with the P4 language</a> - 2020-04-02 00:00:00</h3>
        Introduction P4 is a domain-specific compiled programming language for network data forwarding. It does not know anything about already existing protocols: it doesn&rsquo;t know IP, nor TCP.
A P4 program is compiled to something that is understandable by the P4 aware device. Such device can be a really hardware switch, a software switch, a FPGA.
In this article we will try to use a software switch. More precisely, the uBPF backend.
    </article>
    
    <article>
        <h3><a href="https://klyr.github.io/posts/playing_with_ubpf/">Playing with uBPF</a> - 2020-04-02 00:00:00</h3>
        Introduction uBPF is a user-land implementation of the eBPF VM.
Installation $ git clone https://github.com/iovisor/ubpf.git $ cd ubpf $ make -C vm This compiles the ubpf library (libubpf.a) and a test program to use this library.
Run a simple eBPF program with uBPF static int idouble(int a) { return (a * 2); } int bpf_prog(void *ctx) { int a = 1; a = idouble(a); return (a); } Compile to bpf binary, which is executable by the kernel eBPF VM, or, in our specific case, the user-land uBFP VM.
    </article>
    
</div>



</div>
</div>
<script src="https://klyr.github.io/js/theme.min.js" type="text/javascript"></script>


</body>
</html>

